/* =================================
* jQuery Smart scroll
* All rights reserved.
* @version: 1.0
* @author: Spab Rice
================================= */
!function(t){"use strict";function e(t){t.find(".smartscroll-item").unwrap(),t.children(".smartscroll-item").sort(function(t,e){return+t.getAttribute("data-startposition")-+e.getAttribute("data-startposition")}).appendTo(t),t.css("height","auto"),t.removeClass("active"),t.removeClass("smartgenerated")}function r(t){var e=0,r=0,a=t.attr("data-offsettop"),o=t.attr("data-offsetbottom");a&&"false"!==a&&(e=a.indexOf("px")>=0?parseInt(a,10):jQuery(a).height()),o&&"false"!==o&&(r=o.indexOf("px")>=0?parseInt(o,10):jQuery(o).height()),t.data("topposition",t.offset().top-e),t.data("offsetval",e+r);var n=!1;t.children(".smart-col").each(function(){var t=jQuery(this);(!n||n>t.height())&&(n=t.height(),t.siblings(".smart-col").removeClass("lowestcol"),t.addClass("lowestcol"))}),1.1*(jQuery(window).height()-e+r)<n&&t.addClass("active").css("height",n+"px")}function a(){30===o&&jQuery(".smartscroll-container.active .smart-col").not(".lowestcol").each(function(){var t=jQuery(this),e=t.height(),r=t.parent(".smartscroll-container").height(),a=e-r;jQuery(document).scrollTop()+jQuery(window).height()>t.parent(".smartscroll-container").offset().top+t.parent(".smartscroll-container").height()&&TweenLite.to(t,.3,{y:"-"+a})}),jQuery(".smartscroll-container.active.action .smart-col").not(".lowestcol").each(function(){var t=jQuery(this),e=t.height(),r=t.parent(".smartscroll-container").height(),a=e-r,o=r-jQuery(window).height()+parseInt(t.parent(".smartscroll-container").data("offsetval")),n=a/o;n=parseInt((jQuery(document).scrollTop()-parseInt(t.parent(".smartscroll-container").data("topposition")))*n),0>n&&(n=0),n>a&&(n=a),TweenLite.to(t,.3,{y:"-"+n})}),jQuery(".smartscroll-container").each(function(){var t=jQuery(this).height()-jQuery(window).height()+parseInt(jQuery(this).data("offsetval"))+parseInt(jQuery(this).data("topposition"));jQuery(document).scrollTop()>jQuery(this).data("topposition")&&jQuery(document).scrollTop()<t?jQuery(this).addClass("action"):jQuery(this).removeClass("action")}),o+=1}t.fn.extend({smartscroll:function(e){var a={columns:2,offsettop:!1,offsetbottom:!1,breakpoint:768};return e=t.extend(a,e),this.each(function(){var a=jQuery(this);jQuery(this).width(),jQuery(this).height();e=t.extend(e,a.data()),a.addClass("smartscroll-container").css("overflow","hidden"),a.find(".smart-col").wrapInner("<div class='smart-col-inner'></div>"),a.attr("data-columns",e.columns),a.attr("data-offsettop",e.offsettop),a.attr("data-offsetbottom",e.offsetbottom),a.attr("data-breakpoint",e.breakpoint);var o=parseInt(e.breakpoint,10);if(e.columns&&a.children(".smartscroll-item").length>0&&a.children(".smart-col").length<1&&jQuery(window).width()>o){a.children(".smartscroll-item").each(function(t){jQuery(this).attr("data-startposition",t)});for(var n=1;n<=parseInt(e.columns,10);n++){var s=parseInt(e.columns,10)-n;a.children(".smartscroll-item:nth-child("+e.columns+"n-"+s+")").addClass("col-"+n)}for(var n=1;n<=parseInt(e.columns,10);n++)a.children(".smartscroll-item.col-"+n).wrapAll('<div class="smart-col"/>');a.addClass("smartgenerated")}jQuery().unveil&&a.find("img.lazy").length>0&&a.find("img.lazy").unveil(300),jQuery(window).width()>o&&r(a)})}}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function n(){jQuery(window).width()>768&&a(),requestAnimFrame(n)}();var o=0;jQuery(window).resize(function(){jQuery(".smartscroll-container").each(function(){var t=jQuery(this),r=parseInt(t.attr("data-breakpoint"),10);jQuery(window).width()<r&&t.hasClass("smartgenerated")?e(t):jQuery(window).width()>r&&!t.hasClass("smartgenerated")&&t.smartscroll()})}),jQuery(window).scroll(function(){jQuery(".smartscroll-container.active").each(function(){r(jQuery(this))})})}(jQuery);